<div class="main-content mt-4">


    <!-- Conteúdo principal: Detalhes do Staff -->
    <div class="row">
      <div class="col-md-4">
        <div class="card profile-card text-center shadow">
         
            <div>
              <img [src]="fotoUrl"
                onerror="this.onerror=null; this.src='assets/img/jogadores/default.jpg'" alt="Foto do Staff"
                class="img-fluid mb-3">
            </div>


            <h3 class="mt-3">{{staff.nome}}</h3>
         
        </div>
      </div>

      <div class="col-md-8">
        <div class="modern-card shadow">
          <div class="card-header-modern">
            <div class="d-flex justify-content-between align-items-center">
              <div class="d-flex align-items-center">
                <div class="icon-circle me-3">
                  <img [src]="avatarUrl" onerror="this.onerror=null; this.src='assets/img/jogadores/default_avatar.jpg'" alt="Avatar"
                       class="rounded-circle" style="width: 30px; height: 30px;" />
                </div>
                <div>
                  <h5 class="mb-0 fw-bold" style="color: #495057;">Informações Pessoais</h5>
                  <small style="color: #6c757d;">Dados do staff</small>
                </div>
              </div>
            </div>
          </div>
          <div class="card-body-modern">


            <form #staffForm="ngForm">
              <div class="row">
                <div class="col-md-7">
                  <div class="form-group">
                    <label>Nome completo</label>
                    <input type="text" class="form-control" name="nome_completo" [(ngModel)]="staff.nome_completo"
                      [readonly]="!isEditing" [class.readonly]="!isEditing" />
                  </div>
                </div>
                <div class="col-md-5">
                  <div class="form-group">
                    <label>Data Nascimento</label>
                    <input type="text" class="form-control" name="data_nascimento" [(ngModel)]="dataNascimentoDisplay"
                      [readonly]="!isEditing" [class.readonly]="!isEditing" />
                  </div>
                </div>
              </div>

              <div #collapse="ngbCollapse" [(ngbCollapse)]="isCollapsed">
                <div class="row">
                  <div class="col-md-12">
                    <div class="form-group">
                      <label>Email</label>
                      <input type="text" class="form-control" name="email" [(ngModel)]="staff.email"
                        [readonly]="!isEditing" [class.readonly]="!isEditing" />
                    </div>
                  </div>
                </div>

                <div class="row">
                  <div class="col-md-12">
                    <div class="form-group">
                      <label>Telemovel</label>
                      <input type="text" class="form-control" name="telemovel" [(ngModel)]="staff.telemovel"
                        [readonly]="!isEditing" [class.readonly]="!isEditing" />
                    </div>
                  </div>
                </div>

                <div class="row">
                  <div class="col-md-8 pr-1">
                    <div class="form-group">
                      <label>Morada</label>
                      <input type="text" class="form-control" name="morada" [(ngModel)]="staff.morada"
                        [readonly]="!isEditing" [class.readonly]="!isEditing" />
                    </div>
                  </div>
                  <div class="col-md-4 pl-1">
                    <div class="form-group">
                      <label>Código Postal</label>
                      <input type="text" class="form-control" name="codigo_postal" [(ngModel)]="staff.codigo_postal"
                        [readonly]="!isEditing" [class.readonly]="!isEditing" />
                    </div>
                  </div>
                </div>





              </div>

              <!-- Botões -->
              <div class="mt-4">
                <button *ngIf="!isEditing" type="button" class="btn btn-info btn-sm mr-1" (click)="startEditing()">
                  <i class="nc-icon nc-ruler-pencil"></i> Editar
                </button>

                <button *ngIf="isEditing" type="button" class="btn btn-success btn-sm mr-1" (click)="gravarFichaStaff()"
                  [disabled]="staffForm.invalid">
                  <i class="nc-icon nc-check-2"></i> Gravar
                </button>

                <button *ngIf="isEditing" type="button" class="btn btn-secondary btn-sm" (click)="cancelEditing()">
                  <i class="nc-icon nc-simple-remove"></i> Cancelar
                </button>

                <button *ngIf="isEditing" type="button" class="btn btn-info btn-sm" (click)="modoCarregarFicheiro()">
                  <i class="nc-icon nc-image<"></i> Alterar Foto Perfil
                </button>

                <button *ngIf="isEditing" type="button" class="btn btn-info btn-sm"
                  (click)="modoCarregarFicheiro_avatar()">
                  <i class="nc-icon nc-camera-20"></i> Alterar Foto Avatar
                </button>

                <!-- <button type="button" class="btn btn-info btn-sm ml-2" (click)="isCollapsed = !isCollapsed"
                  [attr.aria-expanded]="!isCollapsed" aria-controls="collapseExample" [disabled]="isEditing">
                  <i class="nc-icon nc-minimal-{{isCollapsed ? 'down' : 'up'}}"></i> {{isCollapsed ? 'Mais dados' : 'Menos dados'}}
                </button>
                -->
              </div>
              <div *ngIf="isUploadFoto">
                <input type="file" (change)="onFileSelected($event)" class="form-control-file mb-2">
              </div>
              <div *ngIf="isUploadFoto_avatar">
                <input type="file" (change)="onFileSelected($event)" class="form-control-file mb-2">
              </div>
            </form>

          </div>
        </div>
      </div>
    </div>

    <!-- Spinner de carregamento -->
    <div class="d-flex justify-content-center mt-4" *ngIf="spinner">
      <div class="spinner-border text-danger" role="status">
        <span class="sr-only"></span>
      </div>
    </div>

    <!-- Mensagens de sucesso/erro -->
    <div class="row mt-4">
      <div class="col-md-12">
        <ngb-alert type="success" *ngIf="sbmSuccess" (closed)="sbmSuccess = false">Dados gravados com
          sucesso!</ngb-alert>
        <ngb-alert type="danger" *ngIf="sbmError" (closed)="sbmError = false">Erro ao gravar dados. Por favor, tente
          novamente.</ngb-alert>
      </div>
    </div>

</div>